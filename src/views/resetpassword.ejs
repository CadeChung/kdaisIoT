<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>重設密碼</title>
	
	<!-- 引用boostrap v5.1.3 -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<!-- Google 字型 -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap">
	<!-- 讀取本地css -->
	<link rel="stylesheet" href="/css/resetpassword.css?<%= new Date().getTime() %>">
</head>

<body>
	<div class="container">
		<div class="d-flex justify-content-center h-100">
			<div class="card">
				<div class="card-header text-center">
					<h3>設定新密碼</h3>
				</div>
				<div class="card-body px-5">

					<!-- 告警訊息 -->
                    <div>
                        <% if(errors != "") { %>
                            <% errors.forEach((item) => { %>
                                <div class="auth-alert">
                                    <%- item %>
                                </div>
                            <% }); %>
                        <% } %>
                    </div>

					<div>
                        <% if (locals.isSent) { %>
                            <div class="auth-alert-success">密碼已經成功修改，
                            <br>請返回登入介面進行登入。</div>
                        <% } %>
                    </div>

					<form method="POST" action="/reset">

						<input type="hidden" class="form-control" name="token" value="<%= token %>" required>
						<input type="hidden" class="form-control" name="email" value="<%= email %>" required>

						<div class="form-floating mb-3 mt-3">
							<input type="password" 
								   class="form-control" 
								   name="newPassword"
								   placeholder="newPassword" required>
							<label for="newPassword">新密碼</label>
						</div>

						<div class="form-floating mb-3 form-group">
							<input type="password" 
								   class="form-control" 
								   name="newPasswordConfirmation"
								   placeholder="newPasswordConfirmation" required>
							<label for="newPasswordConfirmation">確認新密碼 </label>
						</div>

						<div class="d-grid mt-3">
							<button type="submit" class="btn btn-primary btn-block">重設密碼</button>
						</div>

					</form>

					<div class="d-flex justify-content-between mt-4">
						<a class="" href="login">返回登入介面</a>
						<a class="" href="register">註冊帳號</a>
					</div>

				</div>
				</div>
			</div>
		</div>
	</div>
</body>

</html>